---
Title: Agent driven repo clean up
Source: insert.sql
---
<div class="container" style="max-width:960px;background:#ffffff;padding:20px;"> <!-- Summary --> <p style="font-weight:600;font-size:1.25rem;">Summary</p> <p> In this exercise you will use <strong>GitHub Copilot Agent mode</strong> to automate a repository clean up. You will prompt the Agent to find dead code paths across the project and create a pull request that removes them. After reviewing the changes and running tests you will merge the pull request. Set aside twenty minutes. </p> <!-- What you will learn --> <p style="font-weight:600;font-size:1.25rem;">What you will learn</p> <ul style="font-size:1.1rem;line-height:1.6;"> <li> <p>Prompting Copilot Agents for repository wide analysis.</p> </li> <li> <p>Letting the Agent generate a branch and pull request automatically.</p> </li> <li> <p>Reviewing deletions to confirm only dead code is removed.</p> </li> <li> <p>Running tests before merging automated clean-up changes.</p> </li> </ul> <!-- Before you start --> <p style="font-weight:600;font-size:1.25rem;">Before you start</p> <p> Install the latest <strong>GitHub Copilot</strong> extension in VS&nbsp;Code and enable Agent mode under <strong>Settings &gt; GitHub Copilot &gt; Agents</strong>. Ensure your repository builds cleanly and that all tests pass with <code>npm test</code> <code>pytest</code> <code>dotnet test</code> or your framework’s command. </p> <!-- Steps --> <p style="font-weight:600;font-size:1.25rem;">Steps</p> <ul style="font-size:1.1rem;line-height:1.6;"> <li> <p><strong>Step&nbsp;1.</strong> Open the repository in VS&nbsp;Code and switch to the Copilot panel. Click <strong>Agent</strong> to enter Agent mode.</p> </li> <li> <p><strong>Step&nbsp;2.</strong> In the Agent prompt type <code>Find dead code paths in this repo and open a PR deleting them</code> then press Enter.</p> </li> <li> <p><strong>Step&nbsp;3.</strong> Wait while the Agent performs static analysis, creates a new branch for example <code>agent-dead-code-cleanup</code> and opens a pull request.</p> </li> <li> <p><strong>Step&nbsp;4.</strong> Open the pull request in GitHub. Review the diff to ensure only unused code paths are removed and no critical logic is affected.</p> </li> <li> <p><strong>Step&nbsp;5.</strong> Run your full test suite <code>npm test</code> <code>pytest</code> <code>dotnet test</code> or rely on continuous integration checks. Confirm all tests pass.</p> </li> <li> <p><strong>Step&nbsp;6.</strong> If any test fails ask the Agent a follow-up prompt such as <code>Undo removal of misidentified function validateUser</code> apply the patch, then rerun tests.</p> </li> <li> <p><strong>Step&nbsp;7.</strong> Once tests pass click <strong>Merge pull request</strong>. Delete the branch if prompted.</p> </li> </ul> <!-- Checkpoint --> <p style="font-weight:600;font-size:1.25rem;">Checkpoint</p> <div style="margin-top:20px;"> <p>1.&nbsp;Did the Agent open a pull request that deleted only dead code</p> <input type="radio" name="q1"> Yes&nbsp;&nbsp; <input type="radio" name="q1"> No </div> <div style="margin-top:20px;"> <p>2.&nbsp;Did all tests pass after the clean up</p> <input type="radio" name="q2"> Yes&nbsp;&nbsp; <input type="radio" name="q2"> No </div> <div style="margin-top:20px;"> <p>3.&nbsp;Did you merge the pull request and delete the clean up branch</p> <input type="radio" name="q3"> Yes&nbsp;&nbsp; <input type="radio" name="q3"> No </div> <!-- Explore more --> <p style="font-weight:600;font-size:1.25rem;">Want to explore more</p> <ul style="font-size:1.1rem;line-height:1.6;"> <li> <p><a href="https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode" target="_blank">Copilot Agents overview</a></p> </li> <li> <p><a href="https://docs.github.com/en/actions/using-workflows" target="_blank">Setting up tests in GitHub Actions</a></p> </li> </ul> </div>
